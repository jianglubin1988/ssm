window.utils={url:location.protocol+"//"+location.host,NICKNAME_REG:/^[\u4e00-\u9fa5\w_]+$/i,REALNAME_REG:/^[\u4e00-\u9fa5a-z ]+$/i,EMAIL_REG:/^[a-zA-Z0-9_\-\.]{1,}@[a-zA-Z0-9_\-]{1,}\.[a-zA-Z0-9_\-.]{1,}$/,NUMBER_REG:/^\d*\.{0,1}\d*$/,REALNUM_REG:/^\d*$/,MOBILE_REG:/^1[3-8]{1}\d{9}$/,MOBILECODE_REG:/^[0-9]{6}$/,ZIP_REG:/^\d{6}$/,IDCARD_REG:/^(\d{18,18}|\d{15,15}|\d{17,17}[xX])$/,PASSWORD_REG:/^(?!\d+$)(?![A-Za-z]+$)[A-Za-z0-9]{6,20}$/,VERIFYCODE_REG:/^[0-9]{6}$/,LICENCE_REG:/(^\d{15}$)|(^\d{18}$)/,IMG_FILE_REG:/^image\/\w+$/,XZBADMIN_REG:/^admin$/,URL_REG:/^(http)s?:\/\/(?:[\w-]+\.?)+[\.\/\?%&=#@\[\]\-+_!:*~\w-]+|(www)\.(?:[\w-]+\.?)+[\.\/\?%&=#@\[\]\-+_!:*~\w-]+$/i,countChar:function(t){return $.trim(t).length},countByte:function(t){return t?t.replace(/[^\x00-\xff]/g,"**").length:0},parseUrl:function(t){for(var i=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,e=["url","scheme","slash","host","port","path","query","hash"],s=i.exec(t),n={},a=0,o=e.length;o>a;a+=1)n[e[a]]=s[a]||"";return n},setQuery:function(t,i,e){var s=utils.getQuery(t,i),n=i+"="+e,a=t.split("#"),t=a[0],o=a[1],h="";return""==s?h="?"==t.substring(t.length-1)?t+n:t+(-1==t.indexOf("?")?"?":"&")+n:(h=t.replace("&"+i+"="+s,"&"+n),h=h.replace("?"+i+"="+s,"?"+n)),o&&(h=h+"#"+o),h},getQuery:function(t,i){var e=utils.parseUrl(t).query,s="",n=e.split("&");return $.each(n,function(t,e){var n=e.split("=");return n[0]==i?(s=n[1],!1):void 0}),s},commaNumber:function(t){var i=String(t).split("."),e=function(t){return t.length<=3?t:e(t.substr(0,t.length-3))+","+t.substr(t.length-3)};return i[0]=e(i[0]),i.join(".")},buttonCountDown:function(t,i){var e=$(t);e.text("重新获取（"+i+"）").addClass("ui-btn-disabled").data("lock",1).prop("disabled",!0);var s=setInterval(function(){i>1?e.text("重新获取（"+--i+"）"):(clearInterval(s),e.text("重新获取").removeClass("ui-btn-disabled").data("lock",0).prop("disabled",!1))},1e3)},browser:{mozilla:/firefox/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase())},ieVersion:function(){var t=/(msie\s|trident.*rv:)([\w.]+)/,i=navigator.userAgent.toLowerCase(),e=t.exec(i);return null!=e?e[2]||"0":void 0}},function(){function t(t,i){this.$node=$(t),this.opt=$.extend({maxHeight:200},i||{}),this.init()}t.prototype={init:function(){this.timer=null,this.minHeight=this.$node.height(),this.bind()},bind:function(){this.$node.on("input propertychange",$.proxy(this.setHeight,this))},setHeight:function(t){clearTimeout(this.timer),this.timer=setTimeout($.proxy(function(){this.tempTextAreaElem||this.createTempTextAreaElem(),this.tempTextAreaElem.val(this.$node.val());var t=this.tempTextAreaElem[0].scrollHeight;t>this.minHeight?t>this.opt.maxHeight?this.$node.css({height:this.opt.maxHeight+"px","overflow-y":"auto"}):this.$node.css({height:t+"px","overflow-y":"hidden"}):this.$node.css({height:this.minHeight+"px","overflow-y":"hidden"})},this),30)},createTempTextAreaElem:function(){var t=$("<textarea></textarea>");t.id="js_temp_textarea",t.css({width:this.$node.width(),"line-height":this.$node.css("line-height"),"font-size":this.$node.css("font-size"),"font-family":this.$node.css("font-family"),position:"absolute",top:"-10000px",height:"0px","overflow-y":"hidden"}),this.tempTextAreaElem=t,$(document.body).append(this.tempTextAreaElem)}},window.xAutoHeightTextArea=function(i,e){return new t(i,e)}}(),function(){function t(t,i){return this.$node=$(t),this.opt=$.extend(!0,{moveDom:null},i||{}),this.$beDragged=this.opt.moveDom,this.params={left:0,top:0,currentX:0,currentY:0,flag:!1},this.time=0,this.init()}t.prototype={init:function(){this.build(),this.bind()},build:function(){this.$node.css("cursor","move"),this.params.left=parseFloat(this.$beDragged.css("left")),this.params.top=parseFloat(this.$beDragged.css("top"))},bind:function(){var t=$(document);this.$node.on("mousedown",$.proxy(this.dragStart,this)),t.on("mousemove",$.proxy(this.dragging,this)),t.on("mouseup",$.proxy(this.dragEnd,this))},dragStart:function(t){this.params.flag=!0,this.params.currentX=t.clientX,this.params.currentY=t.clientY,this.$beDragged.data("dragflag",!0),this.time=0},dragEnd:function(t){this.params.flag=!1,this.params.left=parseFloat(this.$beDragged.css("left")),this.params.top=parseFloat(this.$beDragged.css("top"))},dragging:function(t){if(this.params.flag){this.time++;var i=t.clientX,e=t.clientY,s=i-this.params.currentX,n=e-this.params.currentY;this.$beDragged.css("left",parseInt(this.params.left)+s+"px"),this.$beDragged.css("top",parseInt(this.params.top)+n+"px"),this.time>3&&this.$beDragged.data("dragflag",!1)}}},window.xDrag=function(i,e){return new t(i,e)}}(),function(){function t(t){return this.opt=$.extend(!0,{"class":"",hasTitle:!0,title:"提示",content:"内容",width:"initial",height:"initial",maxHeight:"initial",minHeight:"initial",autoClose:!1,drag:!1,timer:2e3,hasCancel:!0,hasClose:!0,hasMask:!0,singleMask:!0,maskClose:!0,hasAnimate:!0,hasFooter:!0,openAnimate:"ui-dialog-animate",closeAnimate:"ui-dialog-animate-close",animateTimer:200,sureText:"确定",cancelText:"取消",fn:{initCb:function(){},sureCb:function(){},cancelCb:function(){},closeCb:function(){}}},t||{}),this.index_dialog=1e3,this.index_mask=999,this.init()}t.tmpl='{{? it.hasTitle }}<div class="title"><span class="js-title">{{= it.title }}</span>   {{? it.hasClose }}   <span class="closex js-close">&times;</span>   {{?}}</div>{{?}}<div class="content ui-scrollbar">{{= it.content}}</div>{{? it.hasFooter }}<div class="footerbox"><a href="javascript:;" class="ui-btn sure js-sure">{{= it.sureText }}</a>{{? it.hasCancel }}<a href="javascript:;" class="ui-btn ui-btn-cancel cancel js-cancel">{{= it.cancelText }}</a>{{?}}</div>{{?}}',t.prototype={init:function(){return this.$win=$(window),this.build(),this.setPosition(),this.bind(),this.opt.fn.initCb&&this.opt.fn.initCb(),this.opt.autoClose&&this.autoClose(),this.opt.drag&&this.drag(),this},build:function(){var i=this.opt,e=$(document.body);if(this.opt.hasMask){this.$mask=[],this.opt.singleMask&&(this.$mask=e.find(".ui-mask")),(0==this.$mask.length&&this.opt.singleMask||!this.opt.singleMask)&&(this.$mask=$('<div class="ui-mask"></div>'));var s=e.find(".ui-mask"),n=this.opt.singleMask?this.index_mask:this.index_mask+s.length;this.$mask.css("zIndex",n)}this.$node=$('<div class="ui-dialog '+i["class"]+'"></div>');var a=doT.template(t.tmpl).apply(null,[{hasTitle:i.hasTitle,title:i.title,hasClose:i.hasClose,content:i.content,hasCancel:i.hasCancel,hasFooter:i.hasFooter,sureText:i.sureText,cancelText:i.cancelText}]);this.opt.hasAnimate&&this.$node.addClass(this.opt.openAnimate),this.$node.html(a);var o=e.find(".ui-dialog"),h=this.opt.singleMask?this.index_dialog:this.index_dialog+o.length;this.$node.css({width:this.opt.width,height:this.opt.height,minHeight:this.opt.minHeight,maxHeight:this.opt.maxHeight,zIndex:h}),this.$title=this.$node.find(".js-title"),this.$content=this.$node.find(".js-content"),e.append(this.$node),e.append(this.$mask)},bind:function(){this.$node.delegate(".js-close","click",$.proxy(this.handleClose,this)),this.$node.delegate(".js-cancel","click",$.proxy(this.handleCancel,this)),this.$node.delegate(".js-sure","click",$.proxy(this.handleSure,this)),this.opt.maskClose&&this.$mask&&this.$mask.on("click",$.proxy(this.handleClose,this))},drag:function(){var t=this;window.xDrag(t.$node.find(".title"),{moveDom:t.$node})},setPosition:function(){var t=this.$win.height(),i=this.$node.width(),e=this.$node.height();e>=t?this.$node.css({top:"20px",marginTop:0,marginLeft:-i/2,marginBottom:"20px",position:"absolute"}):this.$node.css({marginTop:-e/2,marginLeft:-i/2,position:"fixed"})},setTitle:function(t){this.$title.html(t)},setContent:function(t){this.$content.html(t)},close:function(){var t=$(".ui-dialog");(this.opt.singleMask&&t.length<=1||!this.opt.singleMask)&&this.$mask&&this.$mask.hide().remove(),this.$node.undelegate(),this.$node.hide().remove(),this.opt.fn.closeCb&&this.opt.fn.closeCb()},handleClose:function(){this.opt.hasAnimate?(this.$node.addClass(this.opt.closeAnimate),setTimeout($.proxy(function(){this.close()},this),this.opt.animateTimer)):this.close()},handleCancel:function(){var t=this.opt.fn.cancelCb&&this.opt.fn.cancelCb();t!==!0&&void 0!==t||this.handleClose()},handleSure:function(){var t=this.opt.fn.sureCb&&this.opt.fn.sureCb();t!==!0&&void 0!==t||this.handleClose()},autoClose:function(){setTimeout($.proxy(this.handleClose,this),this.opt.timer)}},window.xDialog=function(i){return new t(i)}}(),function(){function t(t,i){this.$node=$(t),this.opt=$.extend({interval:5e3,duration:600,auto:!0},i||{}),this.index=0,this.interval=null,this.sliding=!1,this.init()}t.prototype={init:function(){this.$item=this.$node.find(".js-item"),this.num=this.$item.size(),this.$dots=this.$node.find(".js-dots"),this.$dotItem=this.$dots.children(),this.dotsW=parseInt(this.$dots.css("width"),10),this.$next=this.$node.find(".js-next"),this.$prev=this.$node.find(".js-prev"),this.$dots.css("margin-left",-this.dotsW/2+"px"),this.opt.auto&&this.cycle(),this.bind()},bind:function(){this.$next.on("click",$.proxy(this.next,this)),this.$prev.on("click",$.proxy(this.prev,this)),this.$dots.delegate("li","click",$.proxy(this.dot,this)),this.$node.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))},cycle:function(){clearInterval(this.interval),this.interval=setInterval($.proxy(this.next,this),this.opt.interval)},pause:function(){clearInterval(this.interval)},next:function(){this.index++,this.index>=this.num&&(this.index=0),this.scroll()},prev:function(){0==this.index&&(this.index=this.num),this.index--,this.scroll()},dot:function(t){var i=$(t.currentTarget),e=i.index();e!=this.index&&(this.index=e),this.scroll()},scroll:function(){this.$item.hide(),this.$item.eq(this.index).stop().fadeIn(this.opt.duration),this.$dotItem.removeClass("active"),this.$dotItem.eq(this.index).addClass("active")}},window.xBanner=function(i,e){return new t(i,e)}}(),function($){$.fn.xPages=function(options){function Plugin(t,i){this._setOptions(t,i),this._setElement(t),this._setEvent()}if(0==this.length)return this;if(this.length>1)return this.each(function(){$(this).xPages(options)}),this;Plugin.prototype={defaults:{pageClass:"ui-page",curPage:1,perPageResult:1,totalResult:3,showRange:5,onPage:function(t){}},options:{},$:{},_t:null,_ajax:null,_totalPage:0,_startRange:1,_endRange:1,_range:0,_pagePrevHtml:'<a href="javascript:;" class="js-prev">上一页</a>',_pageNextHtml:'<a href="javascript:;" class="js-next">下一页</a>',_setOptions:function($fn,options){var attrOptions=$fn.attr("role-options");attrOptions&&(attrOptions=eval("("+attrOptions+")")),this.options=$.extend({},this.defaults,options)},_setElement:function(t){this.$.fn=t},_setEvent:function(){var t=this;this.$.fn;t.init()},init:function(){var t=this,i=(t.options,this.$.fn);i.empty(),t._totalPage=Math.ceil(this.options.totalResult/this.options.perPageResult),t.layoutPages(),t.setEvent()},setEvent:function(){var t=this.$.fn,i=this,e=i.options,s=0;t.find(".js-page").on("click",function(){s=$(this).html(),e.onPage&&e.onPage(s)})},layoutPages:function(){for(var t=this,i=t.options,e=this.$.fn,s="",n=(i.curPage,1);n<=t._totalPage;n++)2!=n&&n!=t._totalPage||(s+='<span class="jp-hidden" href="javascript:;">...</span>'),s+='<a class="jp-hidden js-page" href="javascript:;">'+n+"</a>";e.addClass(i.pageClass).append(s),t.handlePageCode()},handlePageCode:function(){var t=this,i=t.options,e=this.$.fn;t._range=i.showRange,0==i.curPage?i.curPage=1:"",t._startRange=i.curPage-Math.ceil(t._range/2),t._endRange=t._startRange+t._range,t._startRange<=0?(t._startRange=1,t._endRange=t._startRange+t._range,t._endRange>=t._totalPage?t._endRange=t._totalPage:"",t.handleCreateCode($,t._startRange,t._endRange)):t._endRange>=t._totalPage?(t._startRange=t._totalPage-t._range,t._startRange<=0?t._startRange=1:"",t._endRange=t._totalPage,t.handleCreateCode($,t._startRange,t._endRange)):t.handleCreateCode($,t._startRange,t._endRange),t._startRange!=t._endRange&&(e.find("a").eq(0).removeClass("jp-hidden"),e.find("a").eq(t._totalPage-1).removeClass("jp-hidden"),t.handleCreateCurPage()),t._startRange-1>=1&&(e.find("span").eq(0).removeClass("jp-hidden"),e.prepend(t._pagePrevHtml)),t._endRange+1<t._totalPage&&(e.find("span").eq(2).removeClass("jp-hidden"),e.append(t._pageNextHtml))},handleCreateCurPage:function(){var t=this.$.fn,i=this;t.find("a").each(function(e,s){i.options.curPage==e+1&&(t.find("a").eq(e).before('<span class="cur">'+i.options.curPage+"</span>"),t.find("a").eq(e).remove())})},handleCreateCode:function(){for(var t=this.$.fn,i=this,e=i._startRange;e<i._endRange;e++)t.find("a").eq(e).removeClass("jp-hidden").addClass("js-page")}};var plugin=new Plugin($(this),options);return $(this)[0].xPages=plugin,plugin},$(function(){$('[role*="xPages"]').xPages()})}(jQuery,void 0),function(t){var i=window.utils;t.fn.xLoading=function(e,s){var n=t(this),a=n.children(".xLoading"),o=n[0].tagName;if(e){if(clearTimeout(n.data("loadingT")),a.length)return!1;var h="";h="BODY"==o?'<div class="xLoading">':'<div class="xLoading" style="position:absolute">',h+='<div class="xLoading-container"><div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div></div></div>',n.append(h)}else{var r=setTimeout(function(){a.one("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.remove(),s&&s()}),i.browser.msie&&"9.0"==i.ieVersion()&&(a.remove(),s&&s()),a.addClass("xLoading-hide")},50);n.data("loadingT",r)}},t.xLoading=function(i,e){t("body").xLoading(i,e)}}(jQuery,void 0),function(){function t(t,i){this.$node=$(t),this.opt=$.extend({isforce:!1,placeholder:"",fontSizeVal:"",topVal:"",leftVal:""},i||{}),this.defaultVal=this.$node.attr("placeholder")||this.opt.placeholder||this.$node.data("placeholder"),this.$wrapper=this.$node.parent().css("position","relative"),this.init()}var i=function(){return"placeholder"in document.createElement("input")}();t.prototype={init:function(){this.render(),this.checkValue()&&this.hideLabel(),this.bind()},render:function(){this.$label=$("<label>"+this.defaultVal+"</label>").css({position:"absolute",cursor:"text",color:"#9a9a9a"}),this.$label.css({"font-size":this.opt.fontSizeVal||this.$node.css("font-size"),top:this.opt.topVal||this.$node.css("padding-top"),left:this.opt.leftVal||this.$node.css("padding-left")}),this.$wrapper.append(this.$label)},bind:function(){var t=this;this.$label.on("click",function(){t.hideLabel(),t.$node.focus(),t.$wrapper.addClass("ui-focus")}),this.$node.on("focus",function(){t.$label.is(":visible")&&(t.hideLabel(),t.$wrapper.addClass("ui-focus"))}).on("blur",function(){t.checkValue()||(t.showLabel(),t.$wrapper.removeClass("ui-focus"))})},checkValue:function(){return""!==this.getValue()},getValue:function(){var t="",i=this.$node[0].tagName.toLowerCase();return t="input"===i||"textarea"===i?$.trim(this.$node.val()):$.trim(this.$node.text())},hideLabel:function(){this.$label.hide()},showLabel:function(){this.$label.show()}},window.xPlaceholder=function(e,s){if(!i||s&&s.isforce){var n=$(e),a=[];return $.each(n,function(i,e){a.push(new t($(e),s))}),a}}}(),function(){function t(t,i){this.$node=$(t),this.opt=$.extend({interval:3e3,duration:600,auto:!0,group:1},i||{}),this.index=0,this.interval=null,this.sliding=!1,this.init()}t.prototype={init:function(){this.$list=this.$node.find(".js-list"),this.$item=this.$list.children(),this.$item_clone=this.$item.clone(),this.$first=this.$item.eq(0),this.$dots=this.$node.find(".js-dots"),this.$dotItem=this.$dots.children(),this.dotsW=parseInt(this.$dots.css("width"),10),this.$dots.css("margin-left",-this.dotsW/2+"px"),this.$next=this.$node.find(".js-next"),this.$prev=this.$node.find(".js-prev"),this.num=this.$item.size()/this.opt.group;var t=this.$item.outerWidth()+parseInt(this.$item.css("margin-right"));return this.width=t*this.opt.group,this.$list.css("width",this.width*this.num*2),this.$list.append(this.$item_clone),this.opt.auto&&this.cycle(),this.bind(),this},bind:function(){this.$next.on("click",$.proxy(this.next,this)),this.$prev.on("click",$.proxy(this.prev,this)),this.$dots.delegate("li","click",$.proxy(this.dot,this)),this.$node.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))},cycle:function(){clearInterval(this.interval),this.interval=setInterval($.proxy(this.next,this),this.opt.interval)},pause:function(){clearInterval(this.interval)},next:function(){this.sliding||(this.index++,this.scroll())},prev:function(){this.sliding||(this.index--,this.scroll())},dot:function(t){if(!this.sliding){var i=$(t.currentTarget),e=i.index();e!=this.index&&(this.index=e),this.scroll()}},scroll:function(){var t=this;this.sliding=!0,-1==this.index&&(this.$list.css("left",-(this.width*this.num)),this.index=2),this.$list.stop().animate({left:-(this.width*this.index)},this.opt.duration,function(){t.index>=t.num&&(t.index=0,t.$list.css("left",0)),-1==t.index&&(t.index=2),t.sliding=!1}),this.$dotItem.removeClass("active"),this.$dotItem.eq(3==this.index?0:this.index).addClass("active")}},window.xSlider=function(i,e){var s=$(i),n=[];return $.each(s,function(i,s){n.push(new t($(s),e))}),n}}(),function(){function t(t,i){this.$node=$(t),this.opt=$.extend({tabs:".js-tabs",item:".js-item",conts:".js-panels",active:"active",index:0,hasEvt:!0,evt:"click"},i||{}),this.init()}t.prototype={init:function(){this.$tabs=this.$node.find(this.opt.tabs),this.$tabItem=this.$tabs.children(this.opt.item),this.$contItem=this.$node.find(this.opt.conts).children(),-1!=this.opt.index&&this.active(this.opt.index),this.$tabItem.each(function(t,i){$(i).data("index",t)}),this.bind()},bind:function(){this.opt.hasEvt&&this.$tabs.delegate(this.opt.item,this.opt.evt,$.proxy(this["switch"],this))},"switch":function(t){var i=$(t.currentTarget);this.opt.index=i.data("index"),this.active(this.opt.index),this.$node.trigger("ui-tab-switch",[this.opt.index])},active:function(t){this.$tabItem.removeClass(this.opt.active),this.$contItem.removeClass(this.opt.active),this.$tabItem.eq(t).addClass(this.opt.active),this.$contItem.eq(t).addClass(this.opt.active)}},window.xTab=function(i,e){return new t(i,e)}}(),function(){function t(t,i){return this.$node=$(t),this.opt=$.extend(!0,{direct:"up",arrowPosFix:5,content:"","class":"",hasSure:!1,hasCancel:!1,sureText:"确定",cancelText:"取消",autoClose:!0,timer:1e3,fn:{sureCb:function(){},cancelCb:function(){}}},i||{}),this.init()}t.tmpl='<div class="ui-tip-inner"><div class="ui-tip-cont js-cont">{{= it.content }}</div>{{? it.hasSure || it.hasCancel }}<div class="ui-tip-footer{{? it.hasSure && it.hasCancel }} ui-tip-bothbtn{{?}}" >{{? it.hasSure }}<a href="javascript:;" class="ui-btn sure js-sure">{{= it.sureText }}</a>{{?}}{{? it.hasCancel }}<a href="javascript:;" class="ui-btn cancel js-cancel">{{= it.cancelText }}</a>{{?}}</div>{{?}}</div><span class="ui-tip-arrow"><span class="arrow_line"></span><span class="arrow_bg"></span></span>',t.prototype={init:function(){return this.build(),this.bind(),this.opt.autoClose&&this.autoClose(),this},build:function(){var i=this.opt,e=$(document.body);this.$tip=$('<div class="ui-tip '+i["class"]+'"></div>');var s=doT.template(t.tmpl).apply(null,[{direct:i.direct,content:i.content,hasSure:i.hasSure,hasCancel:i.hasCancel,sureText:i.sureText,cancelText:i.cancelText}]);this.$tip.html(s),e.append(this.$tip),this.$cont=this.$tip.find(".js-cont"),this.$arrow=this.$tip.find(".arrow_bg"),this.arrowHeight=parseInt(this.$arrow.css("borderLeftWidth"))/2,!this.opt.direct&&this.getDirect(),this.setPosition()},bind:function(){this.opt.hasSure&&this.$tip.delegate(".js-sure","click",$.proxy(this.handleSure,this)),this.opt.hasCancel&&this.$tip.delegate(".js-cancel","click",$.proxy(this.handleCancel,this))},getNodeData:function(t){var i=$(t).offset(),e={top:i.top,left:i.left,width:$(t).width(),height:$(t).height()};return e},getDirect:function(){var t=this.getNodeData(this.$node),i=this.getNodeData(this.$tip),e=$(window).height(),s=this.opt.direct||"up";t.top+t.height+this.arrowHeight+i.height+this.opt.arrowPosFix>e?s="down":t.top-this.arrowHeight-i.height-this.opt.arrowPosFix<0&&(s="up"),this.opt.direct=s},setCont:function(t){this.$cont.html(t)},setPosition:function(){var t,i=this.getNodeData(this.$node),e=this.getNodeData(this.$tip);this.$tip.find(".ui-tip-arrow").addClass("ui-tip-arrow-"+this.opt.direct),t="up"==this.opt.direct?i.top+i.height+this.arrowHeight+this.opt.arrowPosFix:i.top-e.height-this.arrowHeight-this.opt.arrowPosFix,this.$tip.css({top:t,left:i.left}),this.$tip.show()},autoClose:function(){setTimeout($.proxy(function(){this.hide()},this),this.opt.timer)},hide:function(){this.$tip.hide()},handleSure:function(){this.opt.fn.sureCb&&this.opt.fn.sureCb(this),this.hide()},handleCancel:function(){this.opt.fn.cancelCb&&this.opt.fn.cancelCb(this),this.hide()}},window.xTip=function(i,e){return new t(i,e)}}(),function(){function t(t,i){this.$node=$(t),this.opt=$.extend({url:s+"/pictures/upload",uploadBtn:".js-upload-input",progress:".js-progress",fileSize:"5",showLog:!0,msg:{100:"请上传图片",101:"读取文件失败",102:"文件过大"},fn:{initCb:function(){},startCb:function(){},errorCb:function(){},successCb:function(){}}},i||{}),this.isHtml5=!!(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData),this.init()}var i=window.xDialog,e=window.utils,s=e.url;t.prototype={init:function(){this.$uploadBtn=this.$node.find(this.opt.uploadBtn),this.$progress=this.$node.find(this.opt.progress),this.$uploaded=this.$progress.children(),this.$uploadBtn.css("zIndex",100),this.file=null,this.opt.fn.initCb&&this.opt.fn.initCb(this.$node,this),this.bind()},bind:function(){this.$uploadBtn.on("change",$.proxy(this.handleFile,this));var t=$(document);t.on("dragenter dragleave dragover drop",function(t){t.preventDefault()}),this.isHtml5&&this.$node.on("drop",$.proxy(this.handleDrop,this))},handleFile:function(t){this.isHtml5?this.fileReader(this.$uploadBtn[0].files[0]):this.handleFormIframeUpload()},handleDrop:function(t){t.preventDefault(),this.fileReader(t.originalEvent.dataTransfer.files[0])},handleFormIframeUpload:function(){var t=this,e=this.$node.find("form"),s=this.$node.find("iframe"),n=s[0];t.opt.fn.startCb&&t.opt.fn.startCb(t.$node),e.submit(),s.on("load",function(){for(var e=(n.contentWindow||n.contentDocument.parentWindow).document.body;e&&3!==e.nodeType;)e=e.firstChild;var s=e.nodeValue,a=JSON.parse(s);0==a.code?(t.handleLoad(null,a.msg),t.opt.fn.successCb&&t.opt.fn.successCb(a,t.$node)):t.opt.showLog&&i({content:t.opt.msg[101]})})},fileReader:function(t){if(this.file=t,!/image\/\w+/.test(t.type))return i({content:this.opt.msg[100]}),!1;if(t.size>1024*this.opt.fileSize*1024)return i({content:this.opt.msg[102]}),!1;var e=new FileReader;this.reader=e,e.readAsDataURL(t),e.onerror=function(){return i({content:this.opt.msg[101]}),!1},e.onprogress=$.proxy(this.handleProgress,this),e.onload=$.proxy(this.handleLoad,this),this.uploadFile()},handleProgress:function(t){if(t.lengthComputable){this.$progress.show();var i=Math.ceil(t.loaded/t.total*100);this.$uploaded.css("width",i+"%"),i>=100&&this.$progress.fadeOut()}},handleLoad:function(t,i){this.$node.children("img").remove();var e=new Image;e.src=i?i:this.reader.result;var s=$(e);s.css({width:this.$node.width(),height:this.$node.height(),position:"absolute",top:0,left:0}),this.$node.append(s)},uploadFile:function(){var t=this,e=new XMLHttpRequest;if(e.upload){t.opt.fn.startCb&&t.opt.fn.startCb(t.$node),e.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var e=JSON.parse(this.responseText);t.opt.fn.successCb&&t.opt.fn.successCb(e,t.$node)}else t.opt.showLog&&i({hasAnimate:!0,hasCancel:!1,content:"系统异常，请稍后再试。若仍有问题，请联系技术人员。"}),t.opt.fn.errorCb&&t.opt.fn.errorCb(e)},e.open("POST",this.opt.url,!0);var s=new FormData;s.append("imgFile",this.file),e.send(s)}}},window.xUpload=function(i,e){var s=$(i),n=[];return $.each(s,function(i,s){n.push(new t($(s),e))}),n}}(),window.cityjson={province:{1:"北京市",2:"上海市",3:"天津市",4:"重庆市",5:"浙江省",6:"江苏省",7:"广东省",8:"福建省",9:"湖南省",10:"湖北省",11:"辽宁省",12:"吉林省",13:"黑龙江省",14:"河北省",15:"河南省",16:"山东省",17:"陕西省",18:"甘肃省",19:"青海省",20:"新疆",21:"山西省",22:"四川省",23:"贵州省",24:"安徽省",25:"江西省",26:"云南省",27:"内蒙古",28:"广西",29:"西藏",30:"宁夏",31:"海南省",32:"香港",33:"澳门",34:"台湾",35:"其他"},city:{1:{1:"东城区",2:"西城区",3:"崇文区",4:"宣武区",5:"朝阳区",6:"丰台区",7:"石景山区",8:"海淀区",9:"门头沟区",10:"房山区",11:"通州区",12:"顺义区",13:"昌平区",14:"大兴区",15:"怀柔区",16:"平谷区",17:"密云县",18:"延庆县"},2:{1:"黄埔区",2:"卢湾区",3:"徐汇区",4:"长宁区",5:"静安区",6:"普陀区",7:"闸北区",8:"虹口区",9:"杨浦区",10:"闵行区",11:"宝山区",12:"嘉定区",13:"浦东新区",14:"金山区",15:"松江区",16:"青浦区",17:"南汇区",18:"奉贤区",19:"崇明县"},3:{1:"和平区",2:"河东区",3:"河西区",4:"南开区",5:"河北区",6:"红桥区",7:"塘沽区",8:"汉沽区",9:"大港区",10:"东丽区",11:"西青区",12:"津南区",13:"北辰区",14:"武清区",15:"宝坻区",16:"宁河县",17:"静海县",18:"蓟县"},4:{1:"万州区",2:"涪陵区",3:"渝中区",4:"大渡口区",5:"江北区",6:"沙坪坝区",7:"九龙坡区",8:"南岸区",9:"北碚区",10:"万盛区",11:"双桥区",12:"渝北区",13:"巴南区",14:"黔江区",15:"长寿区",16:"綦江县",17:"潼南县",18:"铜梁县",19:"大足县",20:"荣昌县",21:"璧山县",22:"梁平县",23:"城口县",24:"丰都县",25:"垫江县",26:"武隆县",27:"忠县",28:"开县",29:"云阳县",30:"奉节县",31:"巫山县",32:"巫溪县",33:"石柱土家族自治县",34:"秀山土家族苗族自治县",35:"酉阳土家族苗族自治县",36:"彭水苗族土家族自治县",37:"江津市",38:"合川市",39:"永川市",40:"南川市"},5:{1:"杭州市",2:"宁波市",3:"温州市",4:"嘉兴市",5:"湖州市",6:"绍兴市",7:"金华市",8:"衢州市",9:"舟山市",10:"台州市",11:"丽水市"},6:{1:"南京市",2:"无锡市",3:"徐州市",4:"常州市",5:"苏州市",6:"南通市",7:"连云港市",8:"淮安市",9:"盐城市",10:"扬州市",11:"镇江市",12:"泰州市",13:"宿迁市"},7:{1:"广州市",2:"韶关市",3:"深圳市",4:"珠海市",5:"汕头市",6:"佛山市",7:"江门市",8:"湛江市",9:"茂名市",10:"肇庆市",11:"惠州市",12:"梅州市",13:"汕尾市",14:"河源市",15:"阳江市",16:"清远市",17:"东莞市",18:"中山市",19:"潮州市",20:"揭阳市",21:"云浮市"},8:{1:"福州市",2:"厦门市",3:"莆田市",4:"三明市",5:"泉州市",6:"漳州市",7:"南平市",8:"龙岩市",9:"宁德市"},9:{1:"长沙市",2:"株洲市",3:"湘潭市",4:"衡阳市",5:"邵阳市",6:"岳阳市",7:"常德市",8:"张家界市",9:"益阳市",10:"郴州市",11:"永州市",12:"怀化市",13:"娄底市",14:"湘西土家族苗族自治州"},10:{1:"武汉市",2:"黄石市",3:"十堰市",4:"宜昌市",5:"襄樊市",6:"鄂州市",7:"荆门市",8:"孝感市",9:"荆州市",10:"黄冈市",11:"咸宁市",12:"随州市",13:"恩施土家族苗族自治州",14:"仙桃市",15:"潜江市",16:"天门市",17:"神农架林区"},11:{1:"沈阳市",2:"大连市",3:"鞍山市",4:"抚顺市",5:"本溪市",6:"丹东市",7:"锦州市",8:"营口市",9:"阜新市",10:"辽阳市",11:"盘锦市",12:"铁岭市",13:"朝阳市",14:"葫芦岛市"},12:{1:"长春市",2:"吉林市",3:"四平市",4:"辽源市",5:"通化市",6:"白山市",7:"松原市",8:"白城市",9:"延边朝鲜族自治州"},13:{1:"哈尔滨市",2:"齐齐哈尔市",3:"鸡西市",4:"鹤岗市",5:"双鸭山市",6:"大庆市",7:"伊春市",8:"佳木斯市",9:"七台河市",10:"牡丹江市",11:"黑河市",12:"绥化市",13:"大兴安岭地区"},14:{1:"石家庄市",2:"唐山市",3:"秦皇岛市",4:"邯郸市",5:"邢台市",6:"保定市",7:"张家口市",8:"承德市",9:"沧州市",10:"廊坊市",11:"衡水市"},15:{1:"郑州市",2:"开封市",3:"洛阳市",4:"平顶山市",5:"安阳市",6:"鹤壁市",7:"新乡市",8:"焦作市",9:"濮阳市",10:"许昌市",11:"漯河市",12:"三门峡市",13:"南阳市",14:"商丘市",15:"信阳市",16:"周口市",17:"驻马店市",18:"济源市"},16:{1:"济南市",2:"青岛市",3:"淄博市",4:"枣庄市",5:"东营市",6:"烟台市",7:"潍坊市",8:"济宁市",9:"泰安市",10:"威海市",11:"日照市",12:"莱芜市",13:"临沂市",14:"德州市",15:"聊城市",16:"滨州市",17:"菏泽市"},17:{1:"西安市",2:"铜川市",3:"宝鸡市",4:"咸阳市",5:"渭南市",6:"延安市",7:"汉中市",8:"榆林市",9:"安康市",10:"商洛市"},18:{1:"兰州市",2:"嘉峪关市",3:"金昌市",4:"白银市",5:"天水市",6:"武威市",7:"张掖市",8:"平凉市",9:"酒泉市",10:"庆阳市",11:"定西市",12:"陇南市",13:"临夏回族自治州",14:"甘南藏族自治州"},19:{1:"西宁市",2:"海东地区",3:"海北藏族自治州",4:"黄南藏族自治州",5:"海南藏族自治州",6:"果洛藏族自治州",7:"玉树藏族自治州",8:"海西蒙古族藏族自治州"},20:{1:"乌鲁木齐市",2:"克拉玛依市",3:"吐鲁番地区",4:"哈密地区",5:"昌吉回族自治州",6:"博尔塔拉蒙古自治州",7:"巴音郭楞蒙古自治州",8:"阿克苏地区",9:"克孜勒苏柯尔克孜自治州",10:"喀什地区",11:"和田地区",12:"伊犁哈萨克自治州",13:"塔城地区",14:"阿勒泰地区",15:"石河子市",16:"阿拉尔市",17:"图木舒克市",18:"五家渠市"},21:{1:"太原市",2:"大同市",3:"阳泉市",4:"长治市",5:"晋城市",6:"朔州市",7:"晋中市",8:"运城市",9:"忻州市",10:"临汾市",11:"吕梁市"},22:{1:"成都市",2:"自贡市",3:"攀枝花市",4:"泸州市",5:"德阳市",6:"绵阳市",7:"广元市",8:"遂宁市",9:"内江市",10:"乐山市",11:"南充市",12:"眉山市",13:"宜宾市",14:"广安市",15:"达州市",16:"雅安市",17:"巴中市",18:"资阳市",19:"阿坝藏族羌族自治州",20:"甘孜藏族自治州",21:"凉山彝族自治州"},23:{1:"贵阳市",2:"六盘水市",3:"遵义市",4:"安顺市",5:"铜仁地区",6:"黔西南布依族苗族自治州",7:"毕节地区",8:"黔东南苗族侗族自治州",9:"黔南布依族苗族自治州"},24:{1:"合肥市",2:"芜湖市",3:"蚌埠市",4:"淮南市",5:"马鞍山市",6:"淮北市",7:"铜陵市",8:"安庆市",9:"黄山市",10:"滁州市",11:"阜阳市",12:"宿州市",13:"巢湖市",14:"六安市",15:"亳州市",16:"池州市",17:"宣城市"},25:{1:"南昌市",2:"景德镇市",3:"萍乡市",4:"九江市",5:"新余市",6:"鹰潭市",7:"赣州市",8:"吉安市",9:"宜春市",10:"抚州市",11:"上饶市"},26:{1:"昆明市",2:"曲靖市",3:"玉溪市",4:"保山市",5:"昭通市",6:"丽江市",7:"普洱市",8:"临沧市",9:"楚雄彝族自治州",10:"红河哈尼族彝族自治州",11:"文山壮族苗族自治州",12:"西双版纳傣族自治州",13:"大理白族自治州",14:"德宏傣族景颇族自治州",15:"怒江傈僳族自治州",16:"迪庆藏族自治州"},27:{1:"呼和浩特市",2:"包头市",3:"乌海市",4:"赤峰市",5:"通辽市",6:"鄂尔多斯市",7:"呼伦贝尔市",8:"巴彦淖尔市",9:"乌兰察布市",10:"兴安盟",11:"锡林郭勒盟",12:"阿拉善盟"},28:{1:"南宁市",2:"柳州市",3:"桂林市",4:"梧州市",5:"北海市",6:"防城港市",7:"钦州市",8:"贵港市",9:"玉林市",10:"百色市",11:"贺州市",12:"河池市",13:"来宾市",14:"崇左市"},29:{1:"拉萨市",2:"昌都地区",3:"山南地区",4:"日喀则地区",5:"那曲地区",6:"阿里地区",7:"林芝地区"},30:{1:"银川市",2:"石嘴山市",3:"吴忠市",4:"固原市",5:"中卫市"},31:{1:"海口市",2:"三亚市",3:"五指山市",4:"琼海市",5:"儋州市",6:"文昌市",7:"万宁市",8:"东方市",9:"定安县",10:"屯昌县",11:"澄迈县",12:"临高县",13:"白沙黎族自治县",14:"昌江黎族自治县",15:"乐东黎族自治县",16:"陵水黎族自治县",17:"保亭黎族苗族自治县",18:"琼中黎族苗族自治县",19:"西沙群岛",20:"南沙群岛",21:"中沙群岛的岛礁及其海域"},32:{1:"中西区",2:"东区",3:"九龙城区",4:"观塘区",5:"南区",6:"深水埗区",7:"黄大仙区",8:"湾仔区",9:"油尖旺区",10:"离岛区",11:"葵青区",12:"北区",13:"西贡区",14:"沙田区",15:"屯门区",16:"大埔区",17:"荃湾区",18:"元朗区"},33:{1:"澳门特别行政区"},34:{1:"台北市",2:"高雄市",3:"基隆市",4:"台中市",5:"台南市",6:"新竹市",7:"嘉义市",8:"台北市",9:"台北县",10:"宜兰县",11:"桃园县",12:"新竹县",13:"苗栗县",14:"台中县",15:"彰化县",16:"南投县",17:"云林县",18:"嘉义县",19:"台南县",20:"高雄县",21:"屏东县",22:"澎湖县",23:"台东县",24:"花莲县"},36:{1:"其他"}}},function(){function t(t,i){this.$node=$(t),this.opt=i,this.init()}var i=window.cityjson;t.prototype={init:function(){this.$province=this.$node.find("select:eq(0)"),this.$city=this.$node.find("select:eq(1)"),this.$tip=this.$node.find(".js-tip-error"),this.defaultProvince=this.$province.data("select")||"",this.defaultCity=this.$city.data("select")||"",this.label1=this.$province.data("label")||"请选择",this.label2=this.$city.data("label")||"请选择",this.provinceData=i.province,this.cityData=i.city,this.validators=this.$node.data("validators"),this.tips=this.$node.data("tips"),this.errorFlag=!1,this.buildTmpl(),this.initSelect(),this.bind()},bind:function(){this.$province.on("change",$.proxy(this.handleCity,this)),this.$city.on("change",$.proxy(this.validate,this))},buildTmpl:function(){this.labelTmpl='<option value="0" cid="0">{{= it.value }}</option>',this.optionTmpl='<option value="{{= it.value }}" cid="{{= it.key }}" {{= it.selected }}>{{= it.value }}</option>'},initSelect:function(){var t=doT.template(this.labelTmpl).apply(null,[{value:this.label1}]);for(var i in this.provinceData){var e=this.defaultProvince==this.provinceData[i]?"selected":"";t+=doT.template(this.optionTmpl).apply(null,[{key:i,value:this.provinceData[i],selected:e}])}if(this.$province.html(t),this.defaultProvince){var e;for(var i in this.provinceData)this.defaultProvince==this.provinceData[i]&&(e=i);this.buildCity(e,!0)}else this.buildCity()},buildCity:function(t,i){var e=doT.template(this.labelTmpl).apply(null,[{value:this.label2}]);if(t){var s=this.cityData[t];for(var t in s){var n=this.defaultCity==s[t]?"selected":"";e+=doT.template(this.optionTmpl).apply(null,[{key:t,value:s[t],selected:i?n:""}])}}this.$city.html(e)},handleCity:function(t){var i=(this.$province.val(),this.$province.find("option:selected").attr("cid"));this.buildCity(i),this.validate()},handleRequire:function(){return"Require"==this.validators?0==this.$province.val()||0==this.$city.val()?this.errorFlag=!0:this.errorFlag=!1:void 0},handleTip:function(){this.errorFlag?(this.$tip.html(this.tips).show(),this.$province.addClass("error"),this.$city.addClass("error"),this.opt.hasIcon&&(this.$city.next(".icon").remove(),this.$city.after('<span class="icon icon-error"></span>'))):(this.$tip.hide(),this.$province.removeClass("error"),this.$city.removeClass("error"),this.opt.hasIcon&&(this.$city.next(".icon").remove(),this.$city.after('<span class="icon icon-right"></span>')))},validate:function(){return this.handleRequire(),
this.handleTip(),!this.errorFlag},getValue:function(){var t={};return t[this.$province.attr("name")]=this.$province.val(),t[this.$city.attr("name")]=this.$city.val(),t}},window.xCitySelect=function(i,e){return new t(i,e)}}(),function(){function t(t,i){this.$node=$(t),this.opt=i,this.init()}var i=window.utils.url;t.prototype={init:function(){this.$elem=this.$node.find(".js-form-field"),this.$tip_error=this.$node.find(".js-tip-error"),this.$tip_prompt=this.$node.find(".js-tip-prompt"),this.validators=this.$elem.data("validators")&&this.$elem.data("validators").split("|"),this.tips=this.$elem.data("tips")&&this.$elem.data("tips").split("|"),this.minlength=this.$elem.data("minlength"),this.maxlength=this.$elem.data("maxlength"),this.minvalue=this.$elem.data("minvalue"),this.maxvalue=this.$elem.data("maxvalue"),this.floatlength=this.$elem.data("floatlength"),this.focus=this.$elem.data("focus"),this.reg=this.$elem.data("reg")&&this.$elem.data("reg").split("|");var t=this.$elem.data("url")&&this.$elem.data("url").split("|");this.url=t&&t[0],this.url_data=t&&t[1],this.url_code=t&&t[2],this.error="",this.errorFlag=!1,this.$elem.data("error",!1),this.keyup=this.$elem.data("keyup"),this.cache=this.$elem.val(),this.bind()},bind:function(){var t=this.$elem[0].type;this.$elem.on("text"==t||"password"==t?"blur":"change",$.proxy(this.initValidate,this)),this.keyup&&this.$elem.on("input propertychange",$.proxy(this.keyupValidate,this)),this.$elem.on("focus",$.proxy(function(){this.hideTip(this.$tip_error)},this)),this.focus&&this.$elem.on("focus",$.proxy(this.handleFocus,this)).on("blur",$.proxy(this.handleBlur,this))},showTip:function(t){t.show()},hideTip:function(t){t.hide()},clearTip:function(){this.hideTip(this.$tip_error),this.hideTip(this.$tip_prompt)},handleFocus:function(){this.$elem.removeClass("error"),this.$node.removeClass("error"),this.hideTip(this.$tip_error),this.showTip(this.$tip_prompt.html(this.focus))},handleBlur:function(){this.hideTip(this.$tip_prompt)},initValidate:function(){if(this.$elem.data("error",!1),this.$elem.removeClass("error"),this.$node.removeClass("error"),this.validators&&this.validators.length>0){for(var t=this.validators,i=0,e=t.length;e>i;i++){var s=t[i];if(this["handle"+s](i)){this.$elem.data("error",!0);break}}this.handleTip()}},keyupValidate:function(){setTimeout($.proxy(function(){if(this.$elem.data("kerror",!1),this.validators&&this.validators.length>0){for(var t=this.validators,i=0,e=t.length;e>i;i++){var s=t[i];if("Remote"!=s&&this["handle"+s](i)){this.$elem.data("kerror",!0);break}}if(-1!=$.inArray("Remote",t))if(this.$elem.data("kerror"))this.$elem.trigger("formitem:remote",!0);else{var n=t.indexOf("Remote");this.handleRemote(n)}else this.$elem.trigger("formitem:remote",this.$elem.data("kerror"))}},this),300)},getValue:function(){var t=this.$elem.attr("type");return"checkbox"==t||"radio"==t?this.$elem.prop("checked"):(this.$elem.val($.trim(this.$elem.val())),$.trim(this.$elem.val()))},handleRequire:function(t){var i=this.getValue();return""==i||0==i?(this.error=this.tips[t]||this.tips[0],this.errorFlag=!0):this.errorFlag=!1},handleLength:function(t){var i=this.getValue(),e=this.minlength||0,s=this.maxlength;return i.length<e||i.length>s?(this.error=this.tips[t]||this.tips[0],this.errorFlag=!0):this.errorFlag=!1},handlePattern:function(t){var i=this,e=this.getValue();return $.each(this.reg,function(s,n){return e&&!window.utils[n.toUpperCase()+"_REG"].test(e)?(i.error=i.tips[t]||i.tips[0],i.errorFlag=!0,!1):void 0}),i.errorFlag?i.errorFlag:this.errorFlag=!1},handleRemote:function(t){var e=this,s={},n=this.getValue();if(n==this.cache)return e.$elem.trigger("formitem:remote",e.keyup?e.$elem.data("kerror")||!1:!1),void e.handleTip();s[e.url_data]=n;var a=e.url_code;$.ajax({type:"GET",url:i+e.url,data:s,success:function(i){function s(){e.cache=e.$elem.val(),e.$elem.trigger("formitem:remote",e.keyup?e.$elem.data("kerror")||!1:!1),e.errorFlag=!1,e.keyup&&e.handleTip()}function n(){e.error=e.tips[t]||e.tips[0],e.$elem.data("error",!0),e.errorFlag=!0,e.$elem.trigger("formitem:remote",e.keyup?e.$elem.data("kerror")||!0:!0),e.handleTip()}return 0!=a?0==i.code?(s(),!1):(n(),!0):+a==+i.code?(n(),!0):(s(),!1)}})},handleValue:function(t){var i=this.getValue(),e=this.minvalue,s=this.maxvalue;return Number(i)<e||Number(i)>s?(this.error=this.tips[t]||this.tips[0],this.errorFlag=!0):this.errorFlag=!1},handleFloat:function(t){var i=this.getValue();if(!isNaN(i)){var e=i.indexOf(".");if(-1!=e){var s=i.substring(e+1,i.length);return s.length>this.floatlength?(this.error=this.tips[t]||this.tips[0],this.errorFlag=!0):0==s.length?(this.error=this.tips[t]||this.tips[0],this.errorFlag=!0):this.errorFlag=!1}}},handleTip:function(){this.errorFlag?(this.showTip(this.$tip_error.html(this.error)),this.$elem.addClass("error"),this.$node.addClass("error"),this.opt.hasIcon&&(this.$elem.next(".icon").remove(),this.$elem.after('<span class="icon icon-error"></span>'))):(this.hideTip(this.$tip_error),this.opt.hasIcon&&(this.$elem.next(".icon").remove(),this.$elem.after('<span class="icon icon-right"></span>')))},validate:function(){return"none"==this.$node.css("display")?!0:(this.initValidate(),!this.errorFlag)}},window.xFormItem=function(i,e){return new t(i,e)}}(),function(){function t(t,i){this.$node=$(t),this.opt=$.extend({hasIcon:!1,submitCb:function(t){}},i||{}),this.init()}var i=window.xFormItem,e=window.xCitySelect;t.prototype={init:function(){return this.$items=this.$node.find(".js-form-row"),this.initItems(),this.bind(),this},bind:function(){this.$node.undelegate(),this.$node.delegate(".js-submit","click",$.proxy(this.onSubmit,this))},initItems:function(){var t=[],s={hasIcon:this.opt.hasIcon};this.$items.each(function(n,a){var o=$(a),h=o.data("select");if(h)switch(h){case"city":t[n]=new e(o,s)}else t[n]=new i(o,s)},this),this.items=t},checkValidate:function(){var t=!0;return this.items.forEach(function(i){var e=i.validate();e||(t=!1)}),t},getValues:function(){var t={};return this.items.forEach(function(i){if(i.$elem){var e=i.$elem.attr("name"),s=i.getValue();t[e]=s}else{var n=i.getValue();t=$.extend(t,n)}}),t},clearTips:function(){this.items.forEach(function(t){t.clearTip()})},onSubmit:function(){var t=this.checkValidate();return t?this.opt.submitCb&&this.opt.submitCb(this):!1}},window.xForm=function(i,e){return new t(i,e)}}(),function(){function t(t,i){this.$node=t,this.opt=$.extend({getJson:i.getJson,setNames:i.setNames,fn:{callback:i.callback}},i||{})}t.prototype={init:function(){var t=this.opt.getJson;this.opt.setNames&&$.each(this.opt.setNames,function(i,e){t[i].label=e});for(var i="",e=0;e<t.length;e++)i+='<select><option value="">'+t[e].label+"</option></select>";$(this.$node).html(i);var s=$(this.$node).find("select");$.each(t[0].data,function(t,i){s.eq(0).append('<option value="'+i.id+'" pid="'+i.pid+'">'+i.name+"</option>")}),this.bind()},bind:function(){var t=this.opt.getJson,i=$(this.$node).find("select"),e=this;i.on("change",function(){var s=$(this).index(),n=$(this).val();$.each(t[s].data,function(t,e){e.id==n&&i.eq(s).attr("name",e.name)}),""==n&&i.eq(s).attr("name",""),e.change(s,n)})},change:function(t,i){var e=this.opt.getJson,s=t+1,n=$(this.$node).find("select");if(this.opt.fn.callback){var a=n.eq(t).attr("name"),o=n.eq(t).val();this.opt.fn.callback(a,o)}if(s>=e.length)return!1;for(var h=s;h<e.length;h++)n.eq(h).html('<option value="">'+e[h].label+"</option>");$.each(e[s].data,function(t,e){e.pid==i&&n.eq(s).append('<option value="'+e.id+'" pid="'+e.pid+'">'+e.name+"</option>")})},getValue:function(){var t=$(this.$node).find("select"),i=[];return $.each(t,function(e,s){i.push([s.value,t.eq(e).attr("name")])}),i}},window.xLinkageSelect=function(i,e){return new t(i,e)}}(),function(){function t(t,i){this.$node=$(t),this.opt=$.extend({img:".thumb-img",scale:.8},i||{}),this.init()}t.prototype={init:function(){this.bind();var t=this;$(window).resize(function(){$("#lightBox").length>0&&t.imgResize($("#lightBox").find("img"))})},bind:function(){this.$node.delegate(this.opt.img,"click",$.proxy(this.showBox,this))},showBox:function(t){var i=t.currentTarget;if($this=this,$("#lightBox").length>0)$("#lightBox").show(),$("#lightBox").find(".light-img").html("加载中..."),$("#lightBox").find(".light-intro").html($(i).attr("title"));else{var e=($(i).data("viewurl"),$(i).attr("title")),s="";s=""!=e&&void 0!=e?'<div class="light-mask" id="lightBox"><span class="light-close"></span><div class="light-box"><div class="light-cell"><p class="light-img">加载中...</p><p class="light-intro">'+e+"</p></div></div></div>":'<div class="light-mask" id="lightBox"><span class="light-close"></span><div class="light-box"><div class="light-cell"><p class="light-img">加载中...</p></div></div></div>',$("body").append(s)}var n=new Image;n.src=$(i).data("viewurl"),n.onload=function(){$("#lightBox").find(".light-img").html("").append(n),$this.imgResize($("#lightBox").find("img"))},$("#lightBox").find(".light-close").on("click",function(){$("#lightBox").hide()})},imgResize:function(t){var i=$(window).width(),e=$(window).height(),s=new Image;s.src=$(t).attr("src");var n=s.width,a=s.height,o=$(t).next("p").height(),h=Math.min(n+40,i*this.opt.scale)/(n+40),r=Math.min(a+o+60,e*this.opt.scale)/(a+o+60),l=Math.min(h,r);$(t).width(n*l).height("auto"),$(t).next("p").width($(t).width())}},window.xLightBox=function(i,e){return new t(i,e)}}(),function(){function t(t,i){this.$node=$(t),this.opt=$.extend({direct:"vertical",duration:30,listClass:"ul",itemClass:"li",fixlength:0},i||{}),this.timer=null,this.step=0,this.init()}t.prototype={init:function(){var t=this;if(this.$list=this.$node.find(this.opt.listClass),this.$items=this.$node.find(this.opt.itemClass),"horizon"==this.opt.direct){this.rowWidth=parseInt(this.$items.eq(0).outerWidth())+parseInt(this.$items.eq(0).css("margin-right"))+this.opt.fixlength;var i=0;this.$items.each(function(e,s){i+=parseInt($(s).outerWidth())+parseInt($(s).css("margin-right"))+t.opt.fixlength}),this.$list.width(i)}else this.rowHeight=parseInt(this.$items.eq(0).outerHeight())+parseInt(this.$items.eq(0).css("margin-bottom"))+this.opt.fixlength;this.bind()},bind:function(){var t=this;this.timer=setInterval($.proxy(this.rollText,this),this.opt.duration),this.$node.hover(function(){clearInterval(t.timer)},function(){t.timer=setInterval($.proxy(t.rollText,t),t.opt.duration)})},rollText:function(){if(this.step++,"horizon"==this.opt.direct){this.$list.css("margin-left","-=1");var t=parseInt(this.$list.css("margin-left"));-t>=this.rowWidth&&(this.$items=this.$node.find(this.opt.itemClass),this.$items.slice(0,1).appendTo(this.$list),this.$list.css("margin-left",0))}else{this.$list.css("margin-top","-=1");var i=parseInt(this.$list.css("margin-top"));-i>=this.rowHeight&&(this.$items=this.$node.find(this.opt.itemClass),this.$items.slice(0,1).appendTo(this.$list),this.$list.css("margin-top",0))}}},window.xScroll=function(i,e){var s=$(i),n=[];return $.each(s,function(i,s){n.push(new t($(s),e))}),n}}(),function(){function t(t,i){return this.options=$.extend(!0,{defaultImgSrc:"",loadingImgSrc:""},i||{}),this.init(t)}var i=[];t.prototype={$:[],init:function(t){return this._setElement(t),this._setEvent(),this._pushItems(),this},_setElement:function(t){t.addClass("xDelayLoad").data("xDelayLoadStatus","waiting").attr("src",this.options.placeholder?this.options.placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"),this.$.fn=t},_setEvent:function(){var t=this;if(!i.length){var e;$(window).on("scroll",function(){$(this);clearTimeout(e),e=setTimeout(function(){t._loadItems()},50)}).on("load",function(){$(this).scroll()})}},_pushItems:function(){var t=!1,e=this.$.fn;$.each(i,function(i,s){return e[0]==$(s)[0]?void(t=!0):void 0}),t||i.push(e)},_loadItems:function(){var t=$(window).scrollTop(),e=this;$.each(i,function(i,s){var n=$(s),a=n.offset().top;if(a+n.height()>=t&&a<t+$(window).height()&&"waiting"==n.data("xDelayLoadStatus")){var o=new Image;o.onload=function(){if(n.data("xDelayLoadStatus","loaded").animate({opacity:0},200,function(){n.attr("src",o.src).animate({opacity:1},200)}),e.options.loadingImgSrc){var t=n.closest(".xDelayLoad-container");t.find(".xDelayLoad-loading-container").remove()}},o.src=n.attr("src-async"),n.data("xDelayLoadStatus","loading"),e.options.loadingImgSrc&&n.wrap('<div class="xDelayLoad-container">').after('<div class="xDelayLoad-loading-container"><img src="'+e.options.loadingImgSrc+'"  /></div>')}})}},window.xDelayLoad=function(i,e){var s=$(i);return 0==s.length?this:s.length>1?(s.each(function(){xDelayLoad($(this),e)}),this):new t(s,e)}}();